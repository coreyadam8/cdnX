(()=>{if(window.cdnX)return;const r=new Map,e=new Map;function t(r){return new Promise(((t,n)=>{if(e.has(r))return void t(e.get(r));const o=document.createElement("script");o.src=r,o.async=!0,o.onload=()=>{e.set(r,r),t(r)},o.onerror=()=>{n(new Error(`Failed to load script at ${r}`))},document.head.appendChild(o)}))}Object.entries({jsdelivr:({pkg:r,version:e,path:t})=>`https://cdn.jsdelivr.net/npm/${r}@${e}/${t}`,unpkg:({pkg:r,version:e,path:t})=>`https://unpkg.com/${r}@${e}/${t}`,cdnjs:({pkg:r,version:e,path:t})=>`https://cdnjs.cloudflare.com/ajax/libs/${r}/${e}/${t}`,skypack:({pkg:r,version:e,path:t})=>`https://cdn.skypack.dev/${r}@${e}${t?`/${t}`:""}`}).forEach((([e,t])=>{r.set(e,t)})),window.cdnX={registerCDN:function(e,t){if("function"!=typeof t)throw new TypeError("resolver must be a function");r.set(e,t)},unregisterCDN:function(e){r.delete(e)},listCDNs:function(){return Array.from(r.keys())},loadLibrary:async function(e,n="latest",o="index.js",s={}){if("string"!=typeof e||!e)throw new TypeError("Package name must be a non-empty string");const i=Array.isArray(s.cdnOrder)&&s.cdnOrder.length>0?s.cdnOrder:Array.from(r.keys());if(0===i.length)throw new Error("No CDN providers registered");const a="number"==typeof s.timeout?s.timeout:1e4;for(const s of i){const i=r.get(s);if(!i)continue;let c;try{if(c=i({pkg:e,version:n,path:o}),"string"!=typeof c||!c)throw new Error("Resolver returned invalid URL")}catch(r){console.warn(`cdnX resolver error for ${s}:`,r);continue}try{return await Promise.race([t(c),new Promise(((r,e)=>setTimeout((()=>e(new Error("Load timeout"))),a)))]),c}catch(r){console.warn(`cdnX failed to load from ${s}: ${c}`,r)}}throw new Error(`cdnX failed to load library '${e}'@'${n}' from all CDNs`)}}})();